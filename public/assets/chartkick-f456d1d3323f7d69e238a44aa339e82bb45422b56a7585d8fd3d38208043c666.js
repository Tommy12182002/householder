!function(t){"use strict";function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Function}function i(t){return!n(t)&&t instanceof Object}function r(t,n){var a;for(a in n)i(n[a])||e(n[a])?(i(n[a])&&!i(t[a])&&(t[a]={}),e(n[a])&&!e(t[a])&&(t[a]=[]),r(t[a],n[a])):void 0!==n[a]&&(t[a]=n[a])}function a(t,e){var n={};return r(n,t),r(n,e),n}function o(t){var e,n,i,r,a,o,s,l,u,c,d;return c=Object.prototype.toString.call(t),"[object Date]"===c?t:"[object String]"===c&&(i=t.match(j))?(d=parseInt(i[1],10),o=parseInt(i[3],10)-1,e=parseInt(i[5],10),n=parseInt(i[7],10),a=i[9]?parseInt(i[9],10):0,u=i[11]?parseInt(i[11],10):0,r=i[12]?1e3*parseFloat($+i[12].slice(1)):0,l=Date.UTC(d,o,e,n,a,u,r),i[13]&&i[14]&&(s=60*i[15],i[17]&&(s+=parseInt(i[17],10)),s*="-"===i[14]?-1:1,l-=60*s*1e3),new Date(l)):void 0}function s(t){var e,n,i;for(e=0;e<t.length;e++)for(i=t[e].data,n=0;n<i.length;n++)if(i[n][1]<0)return!0;return!1}function l(t,e,n,i,r){return function(o,l,u){var c=a({},t);return c=a(c,u||{}),l.hideLegend&&e(c),"min"in l?n(c,l.min):s(o)||n(c,0),"max"in l&&i(c,l.max),l.stacked&&r(c),l.colors&&(c.colors=l.colors),c=a(c,l.library||{})}}function u(t,e){document.body.innerText?t.innerText=e:t.textContent=e}function c(t,e){u(t,"Error Loading Chart: "+e),t.style.color="#ff0000"}function d(e,n,i){var r=t.jQuery||t.Zepto||t.$;r.ajax({dataType:"json",url:n,success:i,error:function(t,n,i){var r="string"==typeof i?i:i.message;c(e,r)}})}function h(t,e){try{e(t)}catch(n){throw c(t.element,n.message),n}}function p(t,e){"string"==typeof t.dataSource?d(t.element,t.dataSource,function(n){t.data=n,h(t,e)}):(t.data=t.dataSource,h(t,e))}function f(t){return""+t}function m(t){return parseFloat(t)}function g(t){if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{var e=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");t=o(e)||new Date(t)}return t}function v(t){if(!e(t)){var n,i=[];for(n in t)t.hasOwnProperty(n)&&i.push([n,t[n]]);t=i}return t}function y(t,e){return t[0].getTime()-e[0].getTime()}function b(t,e){var i,r,a;for(a="render"+t,i=0;i<F.length;i++)if(r=F[i],n(r[a]))return r[a](e);throw new Error("No adapter found")}function w(t,n,i){var r,a,o,s,l;for(!e(t)||"object"!=typeof t[0]||e(t[0])?(t=[{name:"Value",data:t}],n.hideLegend=!0):n.hideLegend=!1,n.discrete&&(i=!1),r=0;r<t.length;r++){for(o=v(t[r].data),s=[],a=0;a<o.length;a++)l=o[a][0],l=i?g(l):f(l),s.push([l,m(o[a][1])]);i&&s.sort(y),t[r].data=s}return t}function x(t){var e,n=v(t);for(e=0;e<n.length;e++)n[e]=[f(n[e][0]),m(n[e][1])];return n}function k(t){var e;for(e=0;e<t.length;e++)t[e][1]=g(t[e][1]),t[e][2]=g(t[e][2]);return t}function _(t){t.data=w(t.data,t.options,!0),b("LineChart",t)}function D(t){t.data=w(t.data,t.options,!1),b("ColumnChart",t)}function C(t){t.data=x(t.data),b("PieChart",t)}function T(t){t.data=w(t.data,t.options,!1),b("BarChart",t)}function E(t){t.data=w(t.data,t.options,!0),b("AreaChart",t)}function S(t){t.data=x(t.data),b("GeoChart",t)}function N(t){t.data=k(t.data),b("Timeline",t)}function A(t,e,n,i,r){"string"==typeof e&&(e=document.getElementById(e)),t.element=e,t.options=i||{},t.dataSource=n,M.charts[e.id]=t,p(t,r)}var M,j,$,L=t.Chartkick||{},F=[];if(j=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,$=String(1.5).charAt(1),"Highcharts"in t){var I=new function(){var e=t.Highcharts,n={chart:{},xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},i=function(t){t.legend.enabled=!1},r=function(t,e){t.yAxis.min=e},o=function(t,e){t.yAxis.max=e},s=function(t){t.plotOptions.series.stacking="normal"},u=l(n,i,r,o,s);this.renderLineChart=function(t,n){n=n||"spline";var i={};"areaspline"===n&&(i={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var r,a,o,s=u(t.data,t.options,i);s.xAxis.type=t.options.discrete?"category":"datetime",s.chart.type=n,s.chart.renderTo=t.element.id;var l=t.data;for(a=0;a<l.length;a++){if(r=l[a].data,!t.options.discrete)for(o=0;o<r.length;o++)r[o][0]=r[o][0].getTime();l[a].marker={symbol:"circle"}}s.series=l,new e.Chart(s)},this.renderPieChart=function(t){var i={};t.options.colors&&(i.colors=t.options.colors);var r=a(a(n,i),t.options.library||{});r.chart.renderTo=t.element.id,r.series=[{type:"pie",name:"Value",data:t.data}],new e.Chart(r)},this.renderColumnChart=function(t,n){var i,r,a,o,n=n||"column",s=t.data,l=u(s,t.options),c=[];for(l.chart.type=n,l.chart.renderTo=t.element.id,i=0;i<s.length;i++)for(a=s[i],r=0;r<a.data.length;r++)o=a.data[r],c[o[0]]||(c[o[0]]=new Array(s.length)),c[o[0]][i]=o[1];var d=[];for(i in c)c.hasOwnProperty(i)&&d.push(i);l.xAxis.categories=d;var h=[];for(i=0;i<s.length;i++){for(o=[],r=0;r<d.length;r++)o.push(c[d[r]][i]||0);h.push({name:s[i].name,data:o})}l.series=h,new e.Chart(l)};var c=this;this.renderBarChart=function(t){c.renderColumnChart(t,"bar")},this.renderAreaChart=function(t){c.renderLineChart(t,"areaspline")}};F.push(I)}if(t.google&&t.google.setOnLoadCallback){var H=new function(){var e=t.google,n={},i=[],r=function(){for(var t,n,r=0;r<i.length;r++)t=i[r],n=e.visualization&&("corechart"==t.pack&&e.visualization.LineChart||"timeline"==t.pack&&e.visualization.Timeline),n&&(t.callback(),i.splice(r,1),r--)},o=function(t,a){if(a||(a=t,t="corechart"),i.push({pack:t,callback:a}),n[t])r();else{n[t]=!0;var o={packages:[t],callback:r};L.language&&(o.language=L.language),e.load("visualization","1",o)}},s={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},u=function(t){t.legend.position="none"},c=function(t,e){t.vAxis.viewWindow.min=e},d=function(t,e){t.vAxis.viewWindow.max=e},h=function(t,e){t.hAxis.viewWindow.min=e},p=function(t,e){t.hAxis.viewWindow.max=e},f=function(t){t.isStacked=!0},g=l(s,u,c,d,f),v=function(t,n){var i=new e.visualization.DataTable;i.addColumn(n,"");var r,a,o,s,l,u=[];for(r=0;r<t.length;r++)for(o=t[r],i.addColumn("number",o.name),a=0;a<o.data.length;a++)s=o.data[a],l="datetime"===n?s[0].getTime():s[0],u[l]||(u[l]=new Array(t.length)),u[l][r]=m(s[1]);var c=[];for(r in u)u.hasOwnProperty(r)&&c.push(["datetime"===n?new Date(m(r)):r].concat(u[r]));return"datetime"===n&&c.sort(y),i.addRows(c),i},b=function(e){t.attachEvent?t.attachEvent("onresize",e):t.addEventListener&&t.addEventListener("resize",e,!0),e()};this.renderLineChart=function(t){o(function(){var n=g(t.data,t.options),i=v(t.data,t.options.discrete?"string":"datetime");t.chart=new e.visualization.LineChart(t.element),b(function(){t.chart.draw(i,n)})})},this.renderPieChart=function(t){o(function(){var n={chartArea:{top:"10%",height:"80%"}};t.options.colors&&(n.colors=t.options.colors);var i=a(a(s,n),t.options.library||{}),r=new e.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(t.data),t.chart=new e.visualization.PieChart(t.element),b(function(){t.chart.draw(r,i)})})},this.renderColumnChart=function(t){o(function(){var n=g(t.data,t.options),i=v(t.data,"string");t.chart=new e.visualization.ColumnChart(t.element),b(function(){t.chart.draw(i,n)})})},this.renderBarChart=function(t){o(function(){var n={hAxis:{gridlines:{color:"#ccc"}}},i=l(s,u,h,p,f)(t.data,t.options,n),r=v(t.data,"string");t.chart=new e.visualization.BarChart(t.element),b(function(){t.chart.draw(r,i)})})},this.renderAreaChart=function(t){o(function(){var n={isStacked:!0,pointSize:0,areaOpacity:.5},i=g(t.data,t.options,n),r=v(t.data,t.options.discrete?"string":"datetime");t.chart=new e.visualization.AreaChart(t.element),b(function(){t.chart.draw(r,i)})})},this.renderGeoChart=function(t){o(function(){var n={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},i=a(a(s,n),t.options.library||{}),r=new e.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(t.data),t.chart=new e.visualization.GeoChart(t.element),b(function(){t.chart.draw(r,i)})})},this.renderTimeline=function(t){o("timeline",function(){var n={legend:"none"};t.options.colors&&(n.colorAxis.colors=t.options.colors);var i=a(a(s,n),t.options.library||{}),r=new e.visualization.DataTable;r.addColumn({type:"string",id:"Name"}),r.addColumn({type:"date",id:"Start"}),r.addColumn({type:"date",id:"End"}),r.addRows(t.data),t.chart=new e.visualization.Timeline(t.element),b(function(){t.chart.draw(r,i)})})}};F.push(H)}M={LineChart:function(t,e,n){A(this,t,e,n,_)},PieChart:function(t,e,n){A(this,t,e,n,C)},ColumnChart:function(t,e,n){A(this,t,e,n,D)},BarChart:function(t,e,n){A(this,t,e,n,T)},AreaChart:function(t,e,n){A(this,t,e,n,E)},GeoChart:function(t,e,n){A(this,t,e,n,S)},Timeline:function(t,e,n){A(this,t,e,n,N)},charts:{}},t.Chartkick=M}(window);